# Third Party Integration
การรวม 3rd party integrations/libraries เข้ากับ React

ในตัวอย่างนี้จะได้เห็นว่าสามารถรวม React เข้ากับ jQuery's UI plugin ได้ยังไง
โดยเราเลือก tag-it jQuery plugin มาเป็นตัวอย่าง มันสามารถเปลี่ยน unordered list ให้เป็น input field เพื่อการจัดการกับ tag ได้:
```html
<ul>
  <li>JavaScript</li>
  <li>CSS</li>
</ul>
```
เราต้องเพิ่ม code ส่วน jQuery, jQuery UI และ tag-it plugin เข้าไปแบบนี้:

```javascript
$('<dom element selector>').tagit();
```
เราเลือกใช้ DOM element และเรียก tagit().

สิ่งแรกที่เราต้องทำก็คือ ทำให้ Tags component เป็น single-renderer เนื่องจากเมื่อ React เพิ่ม element ลงไปใน actual DOM เราต้องส่งส่วนที่ควบคุมมันไปให้ jQuery ด้วย ไม่งั้นทั้ง React และ jQuery จะทำงานอยู่บน DOM element เดียวกันโดยไม่รู้จักกัน ซึ่งวิธีก็คือเราจะใช้ lifecycle method `shouldComponentUpdate` เพื่อทำให้มันเป็น single-render

สมมติว่าเราต้องการเพิ่ม tag ใหม่เข้าไปใน tag-it field ที่กำลังรันอยู่ ตัว React component จะ trigger ได้ และจำเป็นต้องใช้ jQuery API เพื่อจัดการ
เราต้องหาวิธีส่งข้อมูลนั้นไปให้ Tags component โดยที่ยังคงรักษาความเป็น single-renderer ไว้
จากที่กล่าวมาทั้งหมด สิ่งที่เราจะทำก็คือเพิ่ม input field ไปที่ App class และเพิ่มปุ่มที่สามารถคลิกแล้วส่งข้อความไปยัง Tags component ได้

```javascript
class App extends React.Component {
  constructor(props) {
    super(props);

    this._addNewTag = this._addNewTag.bind(this);
    this.state = {
      tags: ['JavaScript', 'CSS'],
      newTag: null
    };
  }

  _addNewTag() {
    this.setState({newTag: this.refs.field.value});
  }

  render() {
    return (
      <div>
        <p>Add new tag:</p>
        <div>
          <input type='text' ref='field'/>
          <button onClick={ this._addNewTag }>Add</button>
        </div>
        <Tags tags={ this.state.tags } newTag={ this.state.newTag }/>
      </div>
    );
  }
}
```
เราใช้ internal state เก็บค่าของ field ที่เพิ่มเข้าไปใหม่
ทุกครั้งที่เราคลิกปุ่ม ก็จะไป update state และ trigger ให้ re-render Tags component
แต่เป็นเพราะ shouldComponentUpdate ทำให้เราไม่เห็นว่ามีอะไรเปลี่ยนแปลง สิ่งเดียวที่เปลี่ยนก็คือ เราได้ค่าของ prop newTag ซึ่งอาจได้มาจาก lifecycle method อื่น เช่น componentWillReceiveProps
```javascript
class Tags extends React.Component {
  componentDidMount() {
    this.list = $(this.refs.list);
    this.list.tagit();
  }

  shouldComponentUpdate() {
    return false;
  }

  componentWillReceiveProps(newProps) {
    this.list.tagit('createTag', newProps.newTag);
  }

  render() {
    return (
      <ul ref='list'>
        { this.props.tags.map((tag, i) => <li key={ i }>{ tag } </li>) }
      </ul>
    );
  }
}
```
### links ที่เกี่ยวข้อง:
  - https://github.com/krasimir/react-in-patterns/tree/master/patterns/third-party
